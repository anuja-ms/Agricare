{% include 'Admin/header.html' %}
{% include 'Admin/sidebar.html' %}
{% load static %} 
<script src="{%static 'Admin/jquery-3.7.1.min.js' %}"></script>
<script>
    $(document).ready(function() {
       // alert('haii');
        $.ajaxSetup({
            headers: { "X-CSRF Token": '{{csrf_token}}'}
        });
        $('#districtid').change(function(){
            var districtid = $(this).val();
           // alert(districtid);
            $.ajax({
                type: "POST",
                url: '{% url "filllocation" %}',
                data: { did: districtid },
                dataType: "json",
                success: function(data) {
                    $('#locations').empty();
                    s = 1;
                    $.each(data, function (key, val) {
                        var id=val.locationid;
                        var deleteurl=''.replace('0', id);
                        var row = '<tr> <td>' + s++ + '</td>' +
                                        '<td>' + val.locationname + '</td>'+
                                        '<td class="text-danger"><a href="">Delete</a></td>'+
                                    '</tr>';
                        $('locations').append(row);

                    });
                }
            });
        });
    });
</script>

<div class="table_section padding_infor_info">
    <div class="table-responseive-sm">
        <select name="districtid" id="districtid" class="form-control">
            <option value="">Select District</option>
            {% for d in districts%}
            <option value="{{d.districtid}}">{{d.districtname}}</option>
            {% endfor %}
        </select><br>
        <table class="table">
            <thead>
                <tr>
                    <th>S1 No</th>
                    <th>Location Name</th>
                </tr>
            </thead>
            <tbody id="locations"></tbody>
        </table>
    </div>
</div>


{% include 'Admin/footer.html' %}
